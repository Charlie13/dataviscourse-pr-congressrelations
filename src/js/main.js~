/**
 * Created by Curtis on 11/19/2015.
 */
/************************************************
 * main.js
 ************************************************
 *
 * This script represents an overall controller,
 * which calls the functions included in other
 * scripts. This script:
 *
 *      * Loads the data in the json files
 *	* Runs the visualizations once the data
 *	  is loaded
  */

// Data loading
// The following function is used for loading json data
// Code inspired by: https://groups.google.com/forum/#!msg/d3-js/3Y9VHkOOdCM/YnmOPopWUxQJ
/*function json(path, callback) {
    d3.json(path, function(json) {
	json ? callback(null,json):callback("error",null);
    });
}*/

// Load the data
/*queue()
    .defer(json, "data/Senate114Metadata.json")
    .defer(json, "data/SenateRecord114.json")
    .awaitAll(function(error));*/

// First load and assign metadata
d3.json("data/Senate114Metadata.json", function(md) {
    congress.metaData = md;
    
    // Now load and assign record data
    d3.json("data/SenateRecord114.json", function(cd) {
	congress.data = cd;
	congress.clearMembers();
	congress.getAgreementPercent();
	
	// Call visualizations
    });
});